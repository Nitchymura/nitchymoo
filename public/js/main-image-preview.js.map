{"version":3,"names":[],"mappings":"","sources":["main-image-preview.js"],"sourcesContent":["//main-image-preview.js\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n    const fileInput = document.getElementById(\"image\");\r\n    const previewContainer = document.getElementById(\"main-image-preview\") || document.getElementById(\"image-icon\");\r\n\r\n    if (!fileInput || !previewContainer) return;\r\n\r\n    fileInput.addEventListener(\"change\", (e) => {\r\n        const file = e.target.files[0];\r\n\r\n        // 選択解除された場合\r\n        if (!file) {\r\n            // edit ページなら既存画像を戻す\r\n            if (previewContainer.dataset.existing) {\r\n                previewContainer.src = previewContainer.dataset.existing;\r\n            } else {\r\n                // create ページならアイコン表示\r\n                previewContainer.outerHTML = `<i class=\"fa-solid fa-image text-secondary icon-lg d-block text-center\" id=\"image-icon\"></i>`;\r\n            }\r\n            return;\r\n        }\r\n\r\n        // 画像ファイル以外は無視\r\n        if (!file.type.startsWith(\"image/\")) {\r\n            previewContainer.outerHTML = `<p class='text-danger small'>Invalid file type</p>`;\r\n            return;\r\n        }\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (ev) => {\r\n            // プレビュー表示\r\n            if (previewContainer.tagName === \"IMG\") {\r\n                previewContainer.src = ev.target.result;\r\n            } else {\r\n                // アイコンだった場合は置き換え\r\n                const img = document.createElement(\"img\");\r\n                img.src = ev.target.result;\r\n                img.alt = \"Preview\";\r\n                img.id = \"main-image-preview\";\r\n                img.className = \"d-block w-50 img-thumbnail mb-2\";\r\n                previewContainer.replaceWith(img);\r\n            }\r\n        };\r\n        reader.readAsDataURL(file);\r\n    });\r\n});"],"file":"main-image-preview.js"}